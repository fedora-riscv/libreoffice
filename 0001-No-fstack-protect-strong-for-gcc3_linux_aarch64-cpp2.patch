From 8d12e4ec8b843d59661a12a7a92bfec7e4473e0f Mon Sep 17 00:00:00 2001
From: Stephan Bergmann <sbergman@redhat.com>
Date: Thu, 4 Sep 2014 15:26:58 +0200
Subject: [PATCH] No -fstack-protect-strong for gcc3_linux_aarch64/cpp2uno.cxx
 vtableSlotCall

Change-Id: I52efda594d87c37c2d38c61b54f1eebcc76cdfce
---
 bridges/Library_cpp_uno.mk | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/bridges/Library_cpp_uno.mk b/bridges/Library_cpp_uno.mk
index 33a5c00..c2e303d 100644
--- a/bridges/Library_cpp_uno.mk
+++ b/bridges/Library_cpp_uno.mk
@@ -38,7 +38,14 @@ endif
 else ifneq (,$(filter ANDROID-AARCH64 LINUX-AARCH64,$(OS)-$(CPUNAME)))
 
 bridges_SELECTED_BRIDGE := gcc3_linux_aarch64
-bridge_exception_objects := abi callvirtualfunction cpp2uno uno2cpp
+bridge_exception_objects := abi callvirtualfunction uno2cpp
+
+$(eval $(call gb_Library_add_cxxobjects,$(gb_CPPU_ENV)_uno, \
+    bridges/source/cpp_uno/$(bridges_SELECTED_BRIDGE)/cpp2uno, \
+    $(subst -fstack-protector-strong,-fstack-protector, \
+        $(gb_LinkTarget_EXCEPTIONFLAGS) \
+        $(call gb_LinkTarget__get_cxxflags,$(gb_CPPU_ENV)_uno)) \
+))
 
 else ifeq ($(OS)-$(CPUNAME),LINUX-AXP)
 
-- 
1.9.3

