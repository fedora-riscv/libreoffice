From 755209d88073fd497b884b8de1348ec75c2df7eb Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Wed, 19 Nov 2014 16:39:55 +0000
Subject: [PATCH] Resolves: rhbz#1165444 abrt crash with NULL pView

Change-Id: I37f02f16209f274cf0358defba6bfa109948990f
---
 sc/source/ui/view/gridwin.cxx | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/sc/source/ui/view/gridwin.cxx b/sc/source/ui/view/gridwin.cxx
index e8defd1..7b27f0c 100644
--- a/sc/source/ui/view/gridwin.cxx
+++ b/sc/source/ui/view/gridwin.cxx
@@ -5183,12 +5183,9 @@ bool ScGridWindow::GetEditUrl( const Point& rPos,
     ScInputHandler* pInputHdl = NULL;
     if (pViewSh)
         pInputHdl = pViewSh->GetInputHandler();
-
-    if (pInputHdl && pInputHdl->IsInputMode())
-    {
-        EditView* pView = pInputHdl->GetTableView();
+    EditView* pView = (pInputHdl && pInputHdl->IsInputMode()) ? pInputHdl->GetTableView() : NULL;
+    if (pView)
         return extractURLInfo(pView->GetFieldUnderMousePointer(), pName, pUrl, pTarget);
-    }
 
     //! nPosX/Y mit uebergeben?
     SCsCOL nPosX;
-- 
1.9.3

