From e7493d7aa73cfaab2e2f81b7fb6a71e2af77fcc2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Thu, 16 Jun 2011 12:41:45 +0100
Subject: [PATCH] Resolves: rhbz#713154 pdf export dialog too tall to fit on
 netbooks

---
 filter/source/pdf/impdialog.cxx |    8 +++
 filter/source/pdf/impdialog.hrc |    5 ++
 filter/source/pdf/impdialog.hxx |    8 +++
 filter/source/pdf/impdialog.src |  119 ++++++++++++++++++++++++---------------
 4 files changed, 94 insertions(+), 46 deletions(-)

diff --git a/filter/source/pdf/impdialog.cxx b/filter/source/pdf/impdialog.cxx
index c8d5049..54ec9b3 100644
--- a/filter/source/pdf/impdialog.cxx
+++ b/filter/source/pdf/impdialog.cxx
@@ -432,6 +432,8 @@
     maCbReduceImageResolution( this, PDFFilterResId( CB_REDUCEIMAGERESOLUTION ) ),
     maCoReduceImageResolution( this, PDFFilterResId( CO_REDUCEIMAGERESOLUTION ) ),
 
+    m_aVerticalLine(this, PDFFilterResId(FL_GENERAL_VERTICAL)),
+
     maFlGeneral( this, PDFFilterResId( FL_GENERAL ) ),
     maCbPDFA1b( this, PDFFilterResId( CB_PDFA_1B_SELECT ) ),
 
@@ -772,6 +774,8 @@
     maRbMagnZoom( this, PDFFilterResId( RB_MAGNF_ZOOM ) ),
     maNumZoom( this, PDFFilterResId( NUM_MAGNF_ZOOM ) ),
 
+    m_aVerticalLine(this, PDFFilterResId(FL_INITVIEW_VERTICAL)),
+
     maFlPageLayout( this, PDFFilterResId( FL_PAGE_LAYOUT ) ),
     maRbPgLyDefault( this, PDFFilterResId( RB_PGLY_DEFAULT ) ),
     maRbPgLySinglePage( this, PDFFilterResId( RB_PGLY_SINGPG ) ),
@@ -935,6 +939,8 @@
     maCbOpenFullScreen( this, PDFFilterResId( CB_WNDOPT_OPNFULL ) ),
     maCbDispDocTitle( this, PDFFilterResId( CB_DISPDOCTITLE ) ),
 
+    m_aVerticalLine(this, PDFFilterResId(FL_VPREFER_VERTICAL)),
+
     maFlUIOptions( this, PDFFilterResId( FL_USRIFOPT ) ),
     maCbHideViewerMenubar( this, PDFFilterResId( CB_UOP_HIDEVMENUBAR ) ),
     maCbHideViewerToolbar( this, PDFFilterResId( CB_UOP_HIDEVTOOLBAR ) ),
@@ -1028,6 +1034,8 @@
     maOwnerPwdSet( PDFFilterResId( STR_OWNER_PWD_SET ) ),
     maOwnerPwdUnset( PDFFilterResId( STR_OWNER_PWD_UNSET ) ),
 
+    m_aVerticalLine(this, PDFFilterResId(FL_SECURITY_VERTICAL)),
+
     maFlPrintPermissions( this, PDFFilterResId( FL_PRINT_PERMISSIONS ) ),
     maRbPrintNone( this, PDFFilterResId( RB_PRINT_NONE ) ),
     maRbPrintLowRes( this, PDFFilterResId( RB_PRINT_LOWRES ) ),
diff --git a/filter/source/pdf/impdialog.hrc b/filter/source/pdf/impdialog.hrc
index 75708d1..61f2d14 100644
--- a/filter/source/pdf/impdialog.hrc
+++ b/filter/source/pdf/impdialog.hrc
@@ -188,3 +188,8 @@
 #define CB_CNV_OOO_DOCTOPDF     155
 #define CB_EXP_BMRK_TO_DEST     156
 //<---
+
+#define FL_GENERAL_VERTICAL  157
+#define FL_INITVIEW_VERTICAL 158
+#define FL_VPREFER_VERTICAL  158
+#define FL_SECURITY_VERTICAL 160
diff --git a/filter/source/pdf/impdialog.hxx b/filter/source/pdf/impdialog.hxx
index bc2cd3e..a784973 100644
--- a/filter/source/pdf/impdialog.hxx
+++ b/filter/source/pdf/impdialog.hxx
@@ -188,6 +188,8 @@
     CheckBox                    maCbReduceImageResolution;
     ComboBox                    maCoReduceImageResolution;
 
+    FixedLine m_aVerticalLine;
+
     FixedLine                   maFlGeneral;
     CheckBox                    maCbPDFA1b;
     CheckBox                    maCbTaggedPDF;
@@ -252,6 +254,8 @@
     RadioButton                 maRbMagnZoom;
     MetricField                 maNumZoom;
 
+    FixedLine m_aVerticalLine;
+
     FixedLine			        maFlPageLayout;
     RadioButton                 maRbPgLyDefault;
     RadioButton                 maRbPgLySinglePage;
@@ -285,6 +289,8 @@
     CheckBox                    maCbOpenFullScreen;
     CheckBox                    maCbDispDocTitle;
 
+    FixedLine m_aVerticalLine;
+
     FixedLine                   maFlUIOptions;
     CheckBox                    maCbHideViewerMenubar;
     CheckBox                    maCbHideViewerToolbar;
@@ -325,6 +331,8 @@
     String                      maOwnerPwdSet;
     String                      maOwnerPwdUnset;
 
+    FixedLine m_aVerticalLine;
+
     FixedLine					maFlPrintPermissions;
     RadioButton					maRbPrintNone;
     RadioButton					maRbPrintLowRes;
diff --git a/filter/source/pdf/impdialog.src b/filter/source/pdf/impdialog.src
index 531d728..1779b5f 100644
--- a/filter/source/pdf/impdialog.src
+++ b/filter/source/pdf/impdialog.src
@@ -27,7 +27,7 @@
 
 #include "impdialog.hrc"
 
-#define TAB_PDF_SIZE Size = MAP_APPFONT ( 176, 268 )
+#define TAB_PDF_SIZE Size = MAP_APPFONT ( 352, 155 )
 //string for TabDialog standard buttons
 String STR_PDF_EXPORT
 {
@@ -144,43 +144,49 @@
             "1200 DPI" ;
         };
     };
+    FixedLine FL_GENERAL_VERTICAL
+    {
+        Pos = MAP_APPFONT ( 175 , 3 ) ;
+        Size = MAP_APPFONT ( 4 , 150 ) ;
+        Vert = TRUE;
+    };
     FixedLine FL_GENERAL
     {
-        Pos = MAP_APPFONT ( 6 , 117 ) ;
+        Pos = MAP_APPFONT ( 182 , 3 ) ;
         Size = MAP_APPFONT ( 164 , 8 ) ;
         Text[ en-US ] = "General";
     };
     CheckBox CB_PDFA_1B_SELECT
     {
-        Pos = MAP_APPFONT ( 12, 128 ) ;
+        Pos = MAP_APPFONT ( 188, 14 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "P~DF/A-1a";
     };
     CheckBox CB_TAGGEDPDF
     {
-        Pos = MAP_APPFONT ( 12 , 141 ) ;
+        Pos = MAP_APPFONT ( 188 , 27 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "~Tagged PDF";
     };
     CheckBox CB_EXPORTFORMFIELDS
     {
-        Pos = MAP_APPFONT ( 12 , 154 ) ;
+        Pos = MAP_APPFONT ( 188 , 40 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "~Create PDF form";
     };
     FixedText FT_FORMSFORMAT
     {
-        Pos = MAP_APPFONT ( 30 , 168 ) ;
+        Pos = MAP_APPFONT ( 206 , 54 ) ;
         Size = MAP_APPFONT ( 93, 8 ) ;
         Text[ en-US ] = "Submit ~format";
     };
     ListBox LB_FORMSFORMAT
     {
         Border = TRUE ;
-        Pos = MAP_APPFONT ( 126, 166 ) ;
+        Pos = MAP_APPFONT ( 302, 52 ) ;
         Size = MAP_APPFONT ( 38, 48 ) ;
         DeltaLang = < Default ; Default ; Default ; Default ; > ;
         TabStop = TRUE ;
@@ -195,35 +201,35 @@
     };
     CheckBox CB_ALLOWDUPLICATEFIELDNAMES
     {
-        Pos = MAP_APPFONT( 30, 178 );
+        Pos = MAP_APPFONT( 206, 64 );
         Size = MAP_APPFONT( 128, 10 );
         TabStop = TRUE;
         Text [ en-US ] = "Allow duplicate field ~names";
     };
     CheckBox CB_EXPORTBOOKMARKS
     {
-        Pos = MAP_APPFONT ( 12 , 190 ) ;
+        Pos = MAP_APPFONT ( 188 , 76 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Export ~bookmarks";
     };
     CheckBox CB_EXPORTNOTES
     {
-        Pos = MAP_APPFONT ( 12 , 203 ) ;
+        Pos = MAP_APPFONT ( 188 , 89 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "~Export comments";
     };
     CheckBox CB_EXPORTNOTESPAGES
     {
-        Pos = MAP_APPFONT ( 12 , 216 ) ;
+        Pos = MAP_APPFONT ( 188 , 102 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Export ~notes pages";
     };
     CheckBox CB_EXPORTEMPTYPAGES
     {
-        Pos = MAP_APPFONT ( 12 , 229 ) ;
+        Pos = MAP_APPFONT ( 188 , 115 ) ;
         Size = MAP_APPFONT ( 158 , 16 ) ;
         TabStop = TRUE ;
         WordBreak = TRUE ;
@@ -231,14 +237,14 @@
     };
     CheckBox CB_EMBEDSTANDARDFONTS
     {
-        Pos = MAP_APPFONT ( 12 , 248 ) ;
+        Pos = MAP_APPFONT ( 188 , 134 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "E~mbed standard fonts";
     };
     CheckBox CB_ADDSTREAM
     {
-        Pos = MAP_APPFONT ( 12 , 261 ) ;
+        Pos = MAP_APPFONT ( 188 , 147 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Create ~hybrid file";
@@ -349,40 +355,45 @@
         Minimum = 50;
         Maximum = 1600;
     };
-////////////////////////////////////////
+    FixedLine FL_INITVIEW_VERTICAL
+    {
+        Pos = MAP_APPFONT ( 175 , 3 ) ;
+        Size = MAP_APPFONT ( 4 , 150 ) ;
+        Vert = TRUE;
+    };
     FixedLine FL_PAGE_LAYOUT
     {
-        Pos = MAP_APPFONT ( 6 , 146 ) ;
-        Size = MAP_APPFONT (164  , 8 ) ;
+        Pos = MAP_APPFONT ( 182 , 3 ) ;
+        Size = MAP_APPFONT (164 , 8 ) ;
         Text[ en-US ] = "Page layout" ;
     };
     RadioButton  RB_PGLY_DEFAULT
     {
-        Pos = MAP_APPFONT ( 12 , 158 ) ;
+        Pos = MAP_APPFONT ( 188 , 15 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         Text[ en-US ] = "D~efault" ;
     };
     RadioButton  RB_PGLY_SINGPG
     {
-        Pos = MAP_APPFONT ( 12 , 170 ) ;
+        Pos = MAP_APPFONT ( 188 , 27 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         Text[ en-US ] = "~Single page" ;
     };
     RadioButton  RB_PGLY_CONT
     {
-        Pos = MAP_APPFONT ( 12 , 182 ) ;
+        Pos = MAP_APPFONT ( 188 , 39 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         Text[ en-US ] = "~Continuous" ;
     };
     RadioButton  RB_PGLY_CONTFAC
     {
-        Pos = MAP_APPFONT ( 12 , 194 ) ;
+        Pos = MAP_APPFONT ( 188 , 51 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         Text[ en-US ] = "C~ontinuous facing" ;
     };
     CheckBox  CB_PGLY_FIRSTLEFT
     {
-        Pos = MAP_APPFONT ( 22 , 206 ) ;
+        Pos = MAP_APPFONT ( 198 , 63 ) ;
         Size = MAP_APPFONT ( 148 , 10 ) ;
         Text[ en-US ] = "First page is ~left" ;
     };
@@ -432,31 +443,35 @@
         TabStop = TRUE ;
         Text[ en-US ] = "~Display document title";
     };
-
-////////////////////////////////
+    FixedLine FL_VPREFER_VERTICAL
+    {
+        Pos = MAP_APPFONT ( 175 , 3 ) ;
+        Size = MAP_APPFONT ( 4 , 150 ) ;
+        Vert = TRUE;
+    };
     FixedLine FL_USRIFOPT
     {
-        Pos = MAP_APPFONT ( 6 , 64 ) ;
+        Pos = MAP_APPFONT ( 182 , 3 ) ;
         Size = MAP_APPFONT ( 164 , 8 ) ;
         Text[ en-US ] = "User interface options" ;
     };
     CheckBox CB_UOP_HIDEVMENUBAR
     {
-        Pos = MAP_APPFONT ( 12 , 76 ) ;
+        Pos = MAP_APPFONT ( 188 , 15 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Hide ~menubar";
     };
     CheckBox CB_UOP_HIDEVTOOLBAR
     {
-        Pos = MAP_APPFONT ( 12 , 88 ) ;
+        Pos = MAP_APPFONT ( 188 , 27 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Hide ~toolbar";
     };
     CheckBox CB_UOP_HIDEVWINCTRL
     {
-        Pos = MAP_APPFONT ( 12 , 100 ) ;
+        Pos = MAP_APPFONT ( 188 , 39 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Hide ~window controls";
@@ -465,13 +480,13 @@
 ////////////////////////////////
     FixedLine FL_TRANSITIONS
     {
-        Pos = MAP_APPFONT ( 6 , 114 ) ;
+        Pos = MAP_APPFONT ( 6 , 64 ) ;
         Size = MAP_APPFONT ( 164 , 8 ) ;
         Text[ en-US ] = "Transitions" ;
     };
     CheckBox CB_TRANSITIONEFFECTS
     {
-        Pos = MAP_APPFONT ( 12 , 126 ) ;
+        Pos = MAP_APPFONT ( 12 , 76 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "~Use transition effects";
@@ -479,25 +494,25 @@
 ////////////////////////////////
     FixedLine FL_BOOKMARKS
     {
-        Pos = MAP_APPFONT ( 6 , 140 ) ;
+        Pos = MAP_APPFONT ( 182 , 64 ) ;
         Size = MAP_APPFONT ( 164 , 8 ) ;
         Text[ en-US ] = "Bookmarks" ;
     };
     RadioButton RB_ALLBOOKMARKLEVELS
     {
-        Pos = MAP_APPFONT ( 12 , 152 ) ;
+        Pos = MAP_APPFONT ( 188 , 76 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         Text[ en-US ] = "All bookmark levels";
     };
     RadioButton RB_VISIBLEBOOKMARKLEVELS
     {
-        Pos = MAP_APPFONT ( 12 , 166 ) ;
+        Pos = MAP_APPFONT ( 188 , 90 ) ;
         Size = MAP_APPFONT ( 117 , 10 ) ;
         Text[ en-US ] = "Visible bookmark levels";
     };
     NumericField NUM_BOOKMARKLEVELS
     {
-        Pos = MAP_APPFONT ( 132 , 165 ) ;
+        Pos = MAP_APPFONT ( 308 , 89 ) ;
         Size = MAP_APPFONT ( 32 , 12 ) ;
         Border = TRUE;
         Spin = TRUE;
@@ -585,29 +600,33 @@
     {
         Text [ en-US ] = "PDF document will be unrestricted";
     };
-
-//////////////////////////////
+    FixedLine FL_SECURITY_VERTICAL
+    {
+        Pos = MAP_APPFONT ( 175 , 3 ) ;
+        Size = MAP_APPFONT ( 4 , 150 ) ;
+        Vert = TRUE;
+    };
     FixedLine FL_PRINT_PERMISSIONS
     {
-        Pos = MAP_APPFONT ( 12 , 90 ) ;
+        Pos = MAP_APPFONT ( 182 , 5 ) ;
         Size = MAP_APPFONT (156  , 8 ) ;
         Text[ en-US ] = "Printing" ;
     };
     RadioButton RB_PRINT_NONE
     {
-        Pos = MAP_APPFONT ( 18 , 101 ) ;
+        Pos = MAP_APPFONT ( 188 , 16 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "~Not permitted";
     };
     RadioButton RB_PRINT_LOWRES
     {
-        Pos = MAP_APPFONT ( 18 , 112 ) ;
+        Pos = MAP_APPFONT ( 188 , 27 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "~Low resolution (150 dpi)";
     };
     RadioButton RB_PRINT_HIGHRES
     {
-        Pos = MAP_APPFONT ( 18 , 123 ) ;
+        Pos = MAP_APPFONT ( 188 , 38 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "~High resolution";
     };
@@ -615,45 +634,45 @@
 /////////////////////////////
     FixedLine FL_CHANGES_ALLOWED
     {
-        Pos = MAP_APPFONT ( 12 , 134 ) ;
+        Pos = MAP_APPFONT ( 182 , 49 ) ;
         Size = MAP_APPFONT (156  , 8 ) ;
         Text[ en-US ] = "Changes" ;
     };
     RadioButton RB_CHANGES_NONE
     {
-        Pos = MAP_APPFONT ( 18 , 145 ) ;
+        Pos = MAP_APPFONT ( 188 , 60 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "No~t permitted";
     };
     RadioButton RB_CHANGES_INSDEL
     {
-        Pos = MAP_APPFONT ( 18 , 157 ) ;
+        Pos = MAP_APPFONT ( 188 , 72 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "~Inserting, deleting, and rotating pages";
     };
     RadioButton RB_CHANGES_FILLFORM
     {
-        Pos = MAP_APPFONT ( 18 , 168 ) ;
+        Pos = MAP_APPFONT ( 188 , 83 ) ;
         Size = MAP_APPFONT ( 150 , 10 ) ;
         Text[ en-US ] = "~Filling in form fields";
     };
     RadioButton RB_CHANGES_COMMENT
     {
-        Pos = MAP_APPFONT ( 18 , 179 ) ;
+        Pos = MAP_APPFONT ( 188 , 94 ) ;
         Size = MAP_APPFONT ( 152 , 16 ) ;
         WordBreak = TRUE ;
         Text[ en-US ] = "~Commenting, filling in form fields";
     };
     RadioButton RB_CHANGES_ANY_NOCOPY
     {
-        Pos = MAP_APPFONT ( 18 , 198 ) ;
+        Pos = MAP_APPFONT ( 188 , 113 ) ;
         Size = MAP_APPFONT ( 152 , 10 ) ;
         Text[ en-US ] = "~Any except extracting pages";
     };
 
     CheckBox CB_ENDAB_COPY
     {
-        Pos = MAP_APPFONT ( 12 , 211 ) ;
+        Pos = MAP_APPFONT ( 182 , 126 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Ena~ble copying of content" ;
@@ -661,7 +680,7 @@
 
     CheckBox CB_ENAB_ACCESS
     {
-        Pos = MAP_APPFONT ( 12 , 224 ) ;
+        Pos = MAP_APPFONT ( 182 , 139 ) ;
         Size = MAP_APPFONT ( 158 , 10 ) ;
         TabStop = TRUE ;
         Text[ en-US ] = "Enable text access for acce~ssibility tools" ;
