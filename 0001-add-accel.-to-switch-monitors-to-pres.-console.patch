From c11b6b64f63b3c7f8f8bb0f1857a9c7d8748ba9c Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Thu, 12 Mar 2015 15:42:23 +0100
Subject: [PATCH] add accel. to switch monitors to pres. console

Change-Id: I86c458f2c0a1c6a6baa6461a44b68c5f48ea55b0
---
 officecfg/registry/data/org/openoffice/Office/PresenterScreen.xcu | 8 ++++++++
 sdext/source/presenter/PresenterController.cxx                    | 5 ++++-
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/officecfg/registry/data/org/openoffice/Office/PresenterScreen.xcu b/officecfg/registry/data/org/openoffice/Office/PresenterScreen.xcu
index 3eb6434..26d9483 100644
--- a/officecfg/registry/data/org/openoffice/Office/PresenterScreen.xcu
+++ b/officecfg/registry/data/org/openoffice/Office/PresenterScreen.xcu
@@ -969,6 +969,14 @@
             <value xml:lang="en-US">Shows the Slides Overview</value>
           </prop>
         </node>
+        <node oor:name="x" oor:op="replace">
+          <prop oor:name="Left">
+            <value xml:lang="en-US">Ctrl-'4'</value>
+          </prop>
+          <prop oor:name="Right">
+            <value xml:lang="en-US">Switches monitors</value>
+          </prop>
+        </node>
       </node>
     </node>
   </node>
diff --git a/sdext/source/presenter/PresenterController.cxx b/sdext/source/presenter/PresenterController.cxx
index 6c64bd7..e416a73 100644
--- a/sdext/source/presenter/PresenterController.cxx
+++ b/sdext/source/presenter/PresenterController.cxx
@@ -1005,7 +1005,7 @@ void PresenterController::HandleNumericKeyPress (
 
         case awt::KeyModifier::MOD1:
             // Ctrl-1, Ctrl-2, and Ctrl-3 are used to switch between views
-            // (slide view, notes view, normal)
+            // (slide view, notes view, normal). Ctrl-4 switches monitors
             mnPendingSlideNumber = -1;
             if (mpWindowManager.get() == NULL)
                 return;
@@ -1020,6 +1020,9 @@ void PresenterController::HandleNumericKeyPress (
                 case 3:
                     mpWindowManager->SetViewMode(PresenterWindowManager::VM_SlideOverview);
                     break;
+                case 4:
+                    SwitchMonitors();
+                    break;
                 default:
                     // Ignore unsupported key.
                     break;
-- 
2.3.1

