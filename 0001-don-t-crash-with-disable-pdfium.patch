From 4fdafc02cc58762eb89e80f3031df7535fac4caa Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Fri, 3 Mar 2023 12:29:02 +0000
Subject: [PATCH] don't crash with --disable-pdfium

Change-Id: I8a02e9c5367a5fc73674963d31c48a6114e92299
---
 sw/qa/core/text/text.cxx | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/sw/qa/core/text/text.cxx b/sw/qa/core/text/text.cxx
index 9ffae51f175f..0ddc9a0885d8 100644
--- a/sw/qa/core/text/text.cxx
+++ b/sw/qa/core/text/text.cxx
@@ -681,6 +681,10 @@ CPPUNIT_TEST_FIXTURE(SwCoreTextTest, testContentControlPDF)
 
 CPPUNIT_TEST_FIXTURE(SwCoreTextTest, testContentControlPlaceholderPDF)
 {
+    std::shared_ptr<vcl::pdf::PDFium> pPDFium = vcl::pdf::PDFiumLibrary::get();
+    if (!pPDFium)
+        return;
+
     // Given a file with a content control, in placeholder mode:
     createSwDoc();
     SwDoc* pDoc = getSwDoc();
-- 
2.39.1

