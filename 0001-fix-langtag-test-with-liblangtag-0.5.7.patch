From b491152b9f3e7e54518cea1e110fe8781b898068 Mon Sep 17 00:00:00 2001
Message-Id: <b491152b9f3e7e54518cea1e110fe8781b898068.1439308133.git.erack@redhat.com>
From: David Tardon <dtardon@redhat.com>
Date: Wed, 8 Jul 2015 09:48:46 +0200
Subject: [PATCH] fix langtag test with liblangtag 0.5.7
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="------------erAck-patch-parts"

This is a multi-part message in MIME format.
--------------erAck-patch-parts
Content-Type: text/plain; charset=UTF-8; format=fixed
Content-Transfer-Encoding: 8bit


Change-Id: Ic8639daa5a32cf98fa17903424b00916cb6d8c6f
---
 i18nlangtag/qa/cppunit/test_languagetag.cxx | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)


--------------erAck-patch-parts
Content-Type: text/x-patch; name="0001-fix-langtag-test-with-liblangtag-0.5.7.patch"
Content-Transfer-Encoding: 8bit
Content-Disposition: attachment; filename="0001-fix-langtag-test-with-liblangtag-0.5.7.patch"

diff --git a/i18nlangtag/qa/cppunit/test_languagetag.cxx b/i18nlangtag/qa/cppunit/test_languagetag.cxx
index 2bbad1c..af95b43 100644
--- a/i18nlangtag/qa/cppunit/test_languagetag.cxx
+++ b/i18nlangtag/qa/cppunit/test_languagetag.cxx
@@ -601,7 +601,10 @@ void TestLanguageTag::testAllTags()
         CPPUNIT_ASSERT( LanguageTag::isValidBcp47( "de-Latn-DE", &aCanonicalized) && aCanonicalized == "de-DE" );
         /* TODO: at least some (those we know) grandfathered tags should be
          * recognized by the replacement code. */
-        CPPUNIT_ASSERT( LanguageTag::isValidBcp47( "en-GB-oed", &aCanonicalized) && aCanonicalized == "en-GB-oed" );
+        CPPUNIT_ASSERT( LanguageTag::isValidBcp47( "en-GB-oed", &aCanonicalized) );
+        // en-GB-oed has become deprecated in updated language-subtag-registry database
+        // (liblangtag 0.5.7)
+        CPPUNIT_ASSERT( ( aCanonicalized == "en-GB-oxendict" ) || ( aCanonicalized == "en-GB-oed" ) );
 #else
         CPPUNIT_ASSERT( LanguageTag::isValidBcp47( "de-Latn-DE", &aCanonicalized) && aCanonicalized == "de-Latn-DE" );
 #endif

--------------erAck-patch-parts--


