From a0f63a4c3a5430b6b81318f2dc380ca8975d4d65 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Caol=C3=A1n=20McNamara?= <caolanm@redhat.com>
Date: Tue, 18 Jan 2011 12:11:52 +0000
Subject: rhbz#666440 don't pushback and process a corrupt extension

Signed-off-by: David Tardon <dtardon@redhat.com>
---
 .../deployment/registry/package/dp_package.cxx     |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/desktop/source/deployment/registry/package/dp_package.cxx b/desktop/source/deployment/registry/package/dp_package.cxx
index 603f524..b084d87 100755
--- a/desktop/source/deployment/registry/package/dp_package.cxx
+++ b/desktop/source/deployment/registry/package/dp_package.cxx
@@ -1620,7 +1620,8 @@ BackendImpl::PackageImpl::getPackagesFromDb(
         Reference<deployment::XPackage> xExtension =
             bindBundleItem(i->first, i->second, true, m_identifier, xCmdEnv);
         OSL_ASSERT(xExtension.is());
-        retVector.push_back(xExtension);
+        if (xExtension.is())
+            retVector.push_back(xExtension);
     }
     
     return retVector;
-- 
1.7.4

